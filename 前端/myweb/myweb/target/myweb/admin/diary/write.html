<!DOCTYPE html>
<html>
<head>
	<meta charset="UTF-8"/>
	<title>日记管理</title>
	<script type="text/javascript" src="../../Constant.js"></script>
</head>
<body>

<center>
	<div>
		<form action="javascript:;" method="POST">
			<table>
				<tr>
					<td>日记：</td>
					<td>
						<textarea name="content" cols="50" rows="5" id="content"></textarea>
					</td>
				</tr>
				<tr>
					<td>城市， 国家：</td>
					<td>
						<input type="text" name="city" placeholder="例如：北京， 中国" id="place">
					</td>
				</tr>
				<tr>
					<tr>
						<td colspan="2">
							<input type="submit" name="" value="发表" id="submit">
						</td>
					</tr>
				</tr>
			</table>
		</form>
	</div>
</center>

<!-- js -->
 <script type="text/javascript" src = "http://fengwenyi.com/js/jquery-3.2.1.min.js"></script>
 <script type="text/javascript">
	 var URI = getUrl();
 $(function() {
 	$('#submit').on('click', function() {
 		var content = $('#content').val();
 		var place = $('#place').val();
 		if (content == null || place == null || content == '' || place == '') {
 			alert('不能提交空值');
 		} else {
 			$.ajax({
            url: URI + '/admin/diary/add',
            type: 'POST', 
            async: true,    //或false,是否异步
            data: {
            	'content' : content,
            	'place'   : place
            },
            timeout: 5000,    //超时时间
            dataType: 'json',    //返回的数据格式：json/xml/html/script/jsonp/text
            beforeSend: function(xhr){
                
            },
            success: function(data, textStatus, jqXHR){
               	
            },
            error: function(xhr, textStatus){
                console.log('error');
            },
            complete: function(){
                alert('操作成功');
                location.href="list.html"
            }
        });
 		}
 	});
 });
 </script>
</body>
</html>